<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>图片上载</title>
<script src="/templet/js/jquery.js" type="text/javascript"></script>
<style type="text/css">
	body,form{
		margin:0;
		padding:0;
	}
</style>
</head>
<body>
	<form class="form" method="post" action="" enctype="multipart/form-data">
		<input id='imgsrc' onchange="$('#sztp').click();" name='photo' type="file" style="display:none" />
		<input name="name" value="{:I('param.name')}" type="hidden" />
		<input id="sztp" type="submit" value="上传图片"  style="border:1px solid #dcdcdc;background:#f1f1f1;width:82px;height:30px;float:left;margin-left:5px;" />
	</form>
	<script type="text/javascript">
		$('#sztp').click(function(){
			if ($("#imgsrc").val() == "") { 
				$('#imgsrc').click();
				return false;
			};
			
			var imgurl = /\.[^\.]+$/.exec($("#imgsrc").val()); 
			if(imgurl != '.jpg' && imgurl != '.png' && imgurl != '.gif'){
				alert('上传图片格式不正确,请重新选择');
				$('#imgsrc').val('');
				return false;
			};
			$("#sztp").val("上传中...");
			window.parent.{:I('param.name')}('上传中,请稍候.......');
		});
	</script>
</body>
</html>

